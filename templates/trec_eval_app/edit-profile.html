{% extends 'base.html' %}

{% load staticfiles %}

{% block title %} Edit profile {% endblock %}

{% block body_block %}

    {% if user.is_authenticated %}

        <div class="page-header">
            <h1>User profile: {{ user.username }}</h1>
        </div>
        {% if update  %}
            Your profile has been updated!
            <a href="{% url 'user' %}">Return to profile page</a><br />
        {% else %}

            <div class="container">

                <hr>
                <div class="row">

                    <form class="form-horizontal" role="form" method="post" action="{% url 'edit_profile' %}"
                          enctype="multipart/form-data">
                        {% csrf_token %}

                        <!-- left column (picture) -->
                        <div class="col-md-3">
                            <div class="text-center">
                                <img src="{{ MEDIA_URL }}{{ picture }}" class="avatar img-circle"
                                     alt="avatar" width="200" height="auto">
                                <h6>Upload a different photo...</h6>

                                <input type="file" id="id_picture" name="picture">
                            </div>
                        </div>

                        <!-- edit form column -->
                        <div class="col-md-9 personal-info">
                            <div class="form-group">
                                <label class="col-lg-3 control-label">First name</label>
                                <div class="col-lg-8">
                                    <input class="form-control" type="text" value="{{ user.first_name }}"
                                           id="id_first_name" name="first_name">
                                </div>
                            </div>

                            <div class="form-group">
                                <label class="col-lg-3 control-label">Last name</label>
                                <div class="col-lg-8">
                                    <input class="form-control" type="text" value="{{ user.last_name }}"
                                           id="id_last_name" name="last_name">
                                </div>
                            </div>

                            <div class="form-group">
                                <label class="col-lg-3 control-label">Email</label>
                                <div class="col-lg-8">
                                    <input class="form-control" type="text" value="{{ user.email }}" id="id_email"
                                           name="email">
                                </div>
                            </div>

                            <div class="form-group">
                                <label class="col-lg-3 control-label">University</label>
                                <div class="col-lg-8">
                                    <input class="form-control" type="text" value="{{ university }}" id="id_university"
                                           name="university">
                                </div>
                            </div>

                            <div class="form-group">
                                <label class="col-lg-3 control-label">Description</label>
                                <div class="col-lg-8">
                                    <textarea class="form-control" rows="3"
                                              id="id_description" name="description">{{ description }}</textarea>
                                </div>
                            </div>

                            <input class="form-control" type="password" value="{{ user.password }}"
                                   id="id_password" name="password" hidden>

                            <input class="form-control" type="text" value="{{ user.username }}"
                                   id="id_username" name="username" hidden>

                            <div class="form-group">
                                <label class="col-md-3 control-label"></label>
                                <div class="col-md-8">
                                    <button type="submit" class="btn btn-primary">Save changes</button>
                                </div>
                            </div>

                            <div class="form-group">
                                <label class="col-md-3 control-label"></label>
                                <div class="col-md-8">
                                    <a class="btn btn-default" href="{% url 'user' %}" role="button">Cancel</a>
                                </div>
                            </div>

                        </div>
                    </form>

                </div>
            </div>
        {% endif %}

    {% endif %}

    <hr>

    Cras justo odio, dapibus ac facilisis in, egestas eget quam. Fusce dapibus, tellus ac cursus commodo,
    tortor mauris condimentum nibh, ut fermentum massa justo sit amet risus.


{% endblock %}